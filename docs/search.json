[
  {
    "objectID": "aboutme.html",
    "href": "aboutme.html",
    "title": "About me",
    "section": "",
    "text": "Background\nMy name is Seth Lattner and I am originally from Statesboro, GA. I am currently a Master’s Student at the Southeastern Cooperative Wildlife Disease Study, housed in UGA’s College of Veterinary Medicine. Prior to beginning graduate school, I received a BSFR in Wildlife Resources at UGA’s Warnell School of Forestry and Natural Resources. A fun fact about me is that I have an identical twin brother!\n\n\n\nResearch Interests/Experience\nI am currently studying canine distemper virus in wild carnivores of North Carolina. My undergraduate research focused on bat habitat use on a barrier island. Additionally, I assisted in projects studying Guinea Worm Disease and Snake Fungal Disease. I have spent field seasons assisting in research on small mammals and snakes of southwest Georgia.\n\n\n\nCoding/Data Analysis Experience\nI was introduced to R coding and data analysis during my undergraduate coursework/research and have tried to continue improving my proficiency in these areas through graduate coursework. I have a lot to learn, but I am enjoying the process. I am interested in working with GitHub and Quarto, as I have no prior experience with these tools.\nI am excited about the start-to-finish approach to data management and analysis in this course. My goal is to learn and practice using tools and techniques to streamline my data management and analysis that I can then use in my own research.\n\n\nmicroshades R Package\nWhile I myself am not colorblind, using color palettes that are accessible to colorblind individuals is of growing interest in the scientific community. A relatively recent publication from ASM in the journal Microbiology Resource Announcements details a new R package, named microshades, that provides a wide range of colorblind-accessible color options for use in microbiome data visualization, as well as some other useful functions."
  },
  {
    "objectID": "coding_exercise.html",
    "href": "coding_exercise.html",
    "title": "R Coding Exercise",
    "section": "",
    "text": "Loading/Examining Data\nFirst, I want to take a look at the gapminder data I will be using from the ‘dslabs’ package.\n\n## load required packages\nlibrary(tidyverse)\nlibrary(dslabs)\nlibrary(ggplot2)\n\n\n#examine gapminder data frame\nhelp(\"gapminder\")\n\nstarting httpd help server ... done\n\n#examine data structure\nstr(gapminder)\n\n'data.frame':   10545 obs. of  9 variables:\n $ country         : Factor w/ 185 levels \"Albania\",\"Algeria\",..: 1 2 3 4 5 6 7 8 9 10 ...\n $ year            : int  1960 1960 1960 1960 1960 1960 1960 1960 1960 1960 ...\n $ infant_mortality: num  115.4 148.2 208 NA 59.9 ...\n $ life_expectancy : num  62.9 47.5 36 63 65.4 ...\n $ fertility       : num  6.19 7.65 7.32 4.43 3.11 4.55 4.82 3.45 2.7 5.57 ...\n $ population      : num  1636054 11124892 5270844 54681 20619075 ...\n $ gdp             : num  NA 1.38e+10 NA NA 1.08e+11 ...\n $ continent       : Factor w/ 5 levels \"Africa\",\"Americas\",..: 4 1 1 2 2 3 2 5 4 3 ...\n $ region          : Factor w/ 22 levels \"Australia and New Zealand\",..: 19 11 10 2 15 21 2 1 22 21 ...\n\n#look at summary of data\nsummary(gapminder)\n\n                country           year      infant_mortality life_expectancy\n Albania            :   57   Min.   :1960   Min.   :  1.50   Min.   :13.20  \n Algeria            :   57   1st Qu.:1974   1st Qu.: 16.00   1st Qu.:57.50  \n Angola             :   57   Median :1988   Median : 41.50   Median :67.54  \n Antigua and Barbuda:   57   Mean   :1988   Mean   : 55.31   Mean   :64.81  \n Argentina          :   57   3rd Qu.:2002   3rd Qu.: 85.10   3rd Qu.:73.00  \n Armenia            :   57   Max.   :2016   Max.   :276.90   Max.   :83.90  \n (Other)            :10203                  NA's   :1453                    \n   fertility       population             gdp               continent   \n Min.   :0.840   Min.   :3.124e+04   Min.   :4.040e+07   Africa  :2907  \n 1st Qu.:2.200   1st Qu.:1.333e+06   1st Qu.:1.846e+09   Americas:2052  \n Median :3.750   Median :5.009e+06   Median :7.794e+09   Asia    :2679  \n Mean   :4.084   Mean   :2.701e+07   Mean   :1.480e+11   Europe  :2223  \n 3rd Qu.:6.000   3rd Qu.:1.523e+07   3rd Qu.:5.540e+10   Oceania : 684  \n Max.   :9.220   Max.   :1.376e+09   Max.   :1.174e+13                  \n NA's   :187     NA's   :185         NA's   :2972                       \n             region    \n Western Asia   :1026  \n Eastern Africa : 912  \n Western Africa : 912  \n Caribbean      : 741  \n South America  : 684  \n Southern Europe: 684  \n (Other)        :5586  \n\n#examine object type\nclass(gapminder)\n\n[1] \"data.frame\"\n\n\n\n\nProcessing Data\nNow, I want to look closer at the African countries from the gapminder dataframe. I also want to look specifically at a few variables, so I will pull those out into new objects.\n\n#select only African countries\nafricadata <-\n  filter(gapminder, continent==\"Africa\")\n#select only infant mortality and life expectancy from africadata\nobj1<-subset(africadata, select = c(infant_mortality, life_expectancy))\nstr(obj1)\n\n'data.frame':   2907 obs. of  2 variables:\n $ infant_mortality: num  148 208 187 116 161 ...\n $ life_expectancy : num  47.5 36 38.3 50.3 35.2 ...\n\nsummary(obj1)\n\n infant_mortality life_expectancy\n Min.   : 11.40   Min.   :13.20  \n 1st Qu.: 62.20   1st Qu.:48.23  \n Median : 93.40   Median :53.98  \n Mean   : 95.12   Mean   :54.38  \n 3rd Qu.:124.70   3rd Qu.:60.10  \n Max.   :237.40   Max.   :77.60  \n NA's   :226                     \n\n#select only population and life expectancy from africadata\nobj2<-subset(africadata, select = c(population, life_expectancy))\nstr(obj2)\n\n'data.frame':   2907 obs. of  2 variables:\n $ population     : num  11124892 5270844 2431620 524029 4829291 ...\n $ life_expectancy: num  47.5 36 38.3 50.3 35.2 ...\n\nsummary(obj2)\n\n   population        life_expectancy\n Min.   :    41538   Min.   :13.20  \n 1st Qu.:  1605232   1st Qu.:48.23  \n Median :  5570982   Median :53.98  \n Mean   : 12235961   Mean   :54.38  \n 3rd Qu.: 13888152   3rd Qu.:60.10  \n Max.   :182201962   Max.   :77.60  \n NA's   :51                         \n\n\n\n\nPlotting Data\nNow I want to plot the data from the African countries to visualize any trends.\n\n#plot life exp as a func of inf mortality\nggplot(data = obj1, aes(infant_mortality, life_expectancy))+\n  geom_point(cex=3, alpha=0.3)+\n  ylab(\"Life Expectancy (Yrs)\")+\n  xlab(\"Infant Mortality (per 1000 Individuals)\")+\n  ylim(0,85)+\n  theme_classic()\n\n\n\n#plot life exp as a func of population size\nggplot(data = obj2, aes(log(population), life_expectancy))+\n  geom_point(cex=3, alpha=0.3)+\n  ylab(\"Life Expectancy (Yrs)\")+\n  xlab(expression(\"Log\"[e]*\"(Population)\"))+\n  theme_classic()\n\n\n\n\n\n\nMore Processing\nThese plots are pretty messy, since each country was sampled across numerous years. To clean this up, I want to first find missing values in the dataset.\n\n#find missing values for infant mortality, then the years in which the data is missing\nmissing<-is.na(africadata$infant_mortality)\nmissing_years<-africadata$year[missing]\nmissing_years\n\n  [1] 1960 1960 1960 1960 1960 1960 1960 1960 1960 1960 1961 1961 1961 1961 1961\n [16] 1961 1961 1961 1961 1961 1961 1961 1961 1961 1961 1961 1961 1962 1962 1962\n [31] 1962 1962 1962 1962 1962 1962 1962 1962 1962 1962 1962 1962 1962 1963 1963\n [46] 1963 1963 1963 1963 1963 1963 1963 1963 1963 1963 1963 1963 1963 1963 1964\n [61] 1964 1964 1964 1964 1964 1964 1964 1964 1964 1964 1964 1964 1964 1964 1965\n [76] 1965 1965 1965 1965 1965 1965 1965 1965 1965 1965 1965 1965 1965 1966 1966\n [91] 1966 1966 1966 1966 1966 1966 1966 1966 1966 1966 1966 1967 1967 1967 1967\n[106] 1967 1967 1967 1967 1967 1967 1967 1968 1968 1968 1968 1968 1968 1968 1968\n[121] 1968 1968 1968 1969 1969 1969 1969 1969 1969 1969 1970 1970 1970 1970 1970\n[136] 1971 1971 1971 1971 1971 1971 1972 1972 1972 1972 1972 1972 1973 1973 1973\n[151] 1973 1973 1973 1974 1974 1974 1974 1974 1975 1975 1975 1975 1975 1976 1976\n[166] 1976 1977 1977 1977 1978 1978 1979 1979 1980 1981 2016 2016 2016 2016 2016\n[181] 2016 2016 2016 2016 2016 2016 2016 2016 2016 2016 2016 2016 2016 2016 2016\n[196] 2016 2016 2016 2016 2016 2016 2016 2016 2016 2016 2016 2016 2016 2016 2016\n[211] 2016 2016 2016 2016 2016 2016 2016 2016 2016 2016 2016 2016 2016 2016 2016\n[226] 2016\n\n\n\n\nAdded by BETELIHEM G.\n\n\nThe above code creates a long list, how about only looking at unique missing numbers to narrow down the list and make it a bit easier\n\nmissing_years_unique<-unique(missing_years)\n\n\n\nAdded by BETELIHEM G, then print to view\n\nprint(missing_years_unique)\n\n [1] 1960 1961 1962 1963 1964 1965 1966 1967 1968 1969 1970 1971 1972 1973 1974\n[16] 1975 1976 1977 1978 1979 1980 1981 2016\n\n\n\n\nMore Plotting\nNow that I’ve found what years contain missing values for infant mortality, I am going to select a year without missing data points (2000) and recreate the plots from earlier using only data from that year.\n\n#created new object with only data from year 2000\nafricadata2000<-\n  filter(africadata, year==\"2000\")\n\n#plot life exp as a func of inf mortality for year 2000\nggplot(data = africadata2000, aes(infant_mortality, life_expectancy))+\n  geom_point(cex=3, alpha=0.3)+\n  ylab(\"Life Expectancy (Yrs)\")+\n  xlab(\"Infant Mortality (per 1000 Individuals)\")+\n  ylim(0,85)+\n  theme_classic()\n\n\n\n#plot life exp as a func of population size for year 2000\nggplot(data = africadata2000, aes(log(population), life_expectancy))+\n  geom_point(cex=3, alpha=0.3)+\n  ylab(\"Life Expectancy (Yrs)\")+\n  xlab(expression(\"Log\"[e]*\"(Population)\"))+\n  theme_classic()\n\n\n\n\n\n\nStatistical Analysis\nFinally, I want to fit a linear regression to both of these functions to determine if there is any statistical significance.\n\n#fit linear regression to both plotted functions\nfit1<-lm(life_expectancy~infant_mortality, data = africadata2000)\nsummary(fit1)\n\n\nCall:\nlm(formula = life_expectancy ~ infant_mortality, data = africadata2000)\n\nResiduals:\n     Min       1Q   Median       3Q      Max \n-22.6651  -3.7087   0.9914   4.0408   8.6817 \n\nCoefficients:\n                 Estimate Std. Error t value Pr(>|t|)    \n(Intercept)      71.29331    2.42611  29.386  < 2e-16 ***\ninfant_mortality -0.18916    0.02869  -6.594 2.83e-08 ***\n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\nResidual standard error: 6.221 on 49 degrees of freedom\nMultiple R-squared:  0.4701,    Adjusted R-squared:  0.4593 \nF-statistic: 43.48 on 1 and 49 DF,  p-value: 2.826e-08\n\nfit2<-lm(life_expectancy~population, data = africadata2000)\nsummary(fit2)\n\n\nCall:\nlm(formula = life_expectancy ~ population, data = africadata2000)\n\nResiduals:\n    Min      1Q  Median      3Q     Max \n-18.429  -4.602  -2.568   3.800  18.802 \n\nCoefficients:\n             Estimate Std. Error t value Pr(>|t|)    \n(Intercept) 5.593e+01  1.468e+00  38.097   <2e-16 ***\npopulation  2.756e-08  5.459e-08   0.505    0.616    \n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\nResidual standard error: 8.524 on 49 degrees of freedom\nMultiple R-squared:  0.005176,  Adjusted R-squared:  -0.01513 \nF-statistic: 0.2549 on 1 and 49 DF,  p-value: 0.6159\n\n\nBased on these results, I can conclude that there is a significant negative effect of infant mortality on life expectancy (p = 2.83e-08) and that population size had no significant effect on life expectancy (p = 0.616).\n\n\nThe following was added by Vijay Panthayi\nLet’s see if we can do anything else interesting with the africadata data set.\nLet’s plot the GDP of each African country as a function of the country’s respective fertility (average number of children per woman).\nFirst, we want to remove any data value that is missing.\n\nmissinggdp <- na.omit(africadata)\n\nNext, let’s create the plot with the new data set that removed all missing gdp values.\n\nggplot(data=missinggdp, aes(x=fertility, y=gdp)) +geom_point(size=2, shape=23)\n\n\n\n\nIt appears that generally, higher GDP occurs with lower fertility rates, however, the number of data points that show that is far lower than the mass at the bottom which tends to show that gdp and fertility rates have no correlation.\nLet’s run a linear regression fit on the data to see if there is a trend in the data mathematically.\n\nfitgdp <- lm(gdp~fertility, data = missinggdp)\nsummary(fitgdp)\n\n\nCall:\nlm(formula = gdp ~ fertility, data = missinggdp)\n\nResiduals:\n       Min         1Q     Median         3Q        Max \n-3.128e+10 -8.340e+09 -2.807e+09  2.178e+09  1.634e+11 \n\nCoefficients:\n              Estimate Std. Error t value Pr(>|t|)    \n(Intercept)  4.500e+10  1.833e+09   24.56   <2e-16 ***\nfertility   -6.097e+09  3.037e+08  -20.08   <2e-16 ***\n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\nResidual standard error: 1.998e+10 on 2201 degrees of freedom\nMultiple R-squared:  0.1548,    Adjusted R-squared:  0.1544 \nF-statistic: 403.1 on 1 and 2201 DF,  p-value: < 2.2e-16\n\nplot(fitgdp)\n\n\n\n\n\n\n\n\n\n\n\n\n\nBased on these results, it is probable that there is no correlation between fertility and gdp. It appears that with a p-value of 2.2e-16, gdp is low regardless of fertility."
  },
  {
    "objectID": "dataanalysis_exercise/code/dataanalysis_exercise.html",
    "href": "dataanalysis_exercise/code/dataanalysis_exercise.html",
    "title": "Data Analysis Exercise",
    "section": "",
    "text": "About the Data\nThis dataset is part of the BEAM (Bacteria, Enterics, Amoeba, and Mycotics) Dashboard, collected by the System for Enteric Disease Response, Investigation, and Coordination (SEDRIC). It contains information on food- and water-borne pathogens circulating in the United States.\n\n\nLoading Data\n\n#load required packages\nlibrary(tidyverse)\nlibrary(here)\nlibrary(zoo)\n\n\n#load data\nBEAM_data <- read_csv(here(\"dataanalysis_exercise\", \"data\", \"BEAM_Dashboard_-_Report_Data.csv\"))\n\nRows: 128342 Columns: 10\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \",\"\nchr (4): State, Source, Pathogen, Serotype/Species\ndbl (6): Year, Month, Number_of_isolates, Outbreak_associated_isolates, New_...\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n\nglimpse(BEAM_data)\n\nRows: 128,342\nColumns: 10\n$ Year                            <dbl> 2017, 2017, 2017, 2017, 2017, 2017, 20…\n$ Month                           <dbl> 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9,…\n$ State                           <chr> \"TX\", \"TX\", \"TX\", \"TX\", \"TX\", \"TX\", \"T…\n$ Source                          <chr> \"Stool\", \"Stool\", \"Stool\", \"Stool\", \"S…\n$ Pathogen                        <chr> \"Escherichia\", \"Escherichia\", \"Salmone…\n$ `Serotype/Species`              <chr> \"Shigella Flexneri Serotype Undetermin…\n$ Number_of_isolates              <dbl> 1, 14, 1, 5, 1, 2, 2, 1, 2, 2, 1, 16, …\n$ Outbreak_associated_isolates    <dbl> NA, NA, NA, NA, NA, 2, NA, NA, NA, NA,…\n$ New_multistate_outbreaks        <dbl> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA…\n$ New_multistate_outbreaks_unique <dbl> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA…\n\n\n\n\nData Cleaning\nNow that we have the data loaded, let’s tidy it up to get it ready for analysis. Thankfully, this is a relatively clean dataset, so wrangling it shouldn’t be too difficult.\nFirst, I’m going to reclassify the categorical variables.\n\nBEAM_data <- BEAM_data %>%\n  mutate(State = as.factor(State)) %>%\n  mutate(Source = as.factor(Source)) %>%\n  mutate(Pathogen = as.factor(Pathogen)) %>%\n  mutate(`Serotype/Species` = as.factor(`Serotype/Species`))\n\nglimpse(BEAM_data)  \n\nRows: 128,342\nColumns: 10\n$ Year                            <dbl> 2017, 2017, 2017, 2017, 2017, 2017, 20…\n$ Month                           <dbl> 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9,…\n$ State                           <fct> TX, TX, TX, TX, TX, TX, TX, TX, TX, TX…\n$ Source                          <fct> Stool, Stool, Stool, Stool, Stool, Sto…\n$ Pathogen                        <fct> Escherichia, Escherichia, Salmonella, …\n$ `Serotype/Species`              <fct> \"Shigella Flexneri Serotype Undetermin…\n$ Number_of_isolates              <dbl> 1, 14, 1, 5, 1, 2, 2, 1, 2, 2, 1, 16, …\n$ Outbreak_associated_isolates    <dbl> NA, NA, NA, NA, NA, 2, NA, NA, NA, NA,…\n$ New_multistate_outbreaks        <dbl> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA…\n$ New_multistate_outbreaks_unique <dbl> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA…\n\n\nI also want to group the total number of isolates of each pathogen for each year. This will help simplify the results and can be used for further analysis.\n\ngrouped_data <- BEAM_data %>%\n  group_by(Year, Pathogen) %>%\n  summarise(sum_isolates = sum(Number_of_isolates), .groups = 'drop')\nglimpse(grouped_data)\n\nRows: 18\nColumns: 3\n$ Year         <dbl> 2017, 2017, 2017, 2018, 2018, 2018, 2019, 2019, 2019, 202…\n$ Pathogen     <fct> Campylobacter, Escherichia, Salmonella, Campylobacter, Es…\n$ sum_isolates <dbl> 2756, 10017, 47477, 4813, 11108, 51385, 4414, 10943, 4695…\n\n\nNow that these variables are reclassified, I want to change the NA’s in a few columns to 0’s, which is more indicative of their actual value.\n\nBEAM_data_clean <- BEAM_data %>%\n  replace(is.na(BEAM_data), 0)\n\nglimpse(BEAM_data_clean)\n\nRows: 128,342\nColumns: 10\n$ Year                            <dbl> 2017, 2017, 2017, 2017, 2017, 2017, 20…\n$ Month                           <dbl> 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9,…\n$ State                           <fct> TX, TX, TX, TX, TX, TX, TX, TX, TX, TX…\n$ Source                          <fct> Stool, Stool, Stool, Stool, Stool, Sto…\n$ Pathogen                        <fct> Escherichia, Escherichia, Salmonella, …\n$ `Serotype/Species`              <fct> \"Shigella Flexneri Serotype Undetermin…\n$ Number_of_isolates              <dbl> 1, 14, 1, 5, 1, 2, 2, 1, 2, 2, 1, 16, …\n$ Outbreak_associated_isolates    <dbl> 0, 0, 0, 0, 0, 2, 0, 0, 0, 0, 0, 2, 0,…\n$ New_multistate_outbreaks        <dbl> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,…\n$ New_multistate_outbreaks_unique <dbl> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,…\n\n\nThat will conclude the data cleaning I will be conducting. Perhaps more wrangling could have been done, but I think this is a good start and sets up some the next contributor fairly well.\n\n#save processed data\nBEAM_data_clean %>% saveRDS(here::here(\"dataanalysis_exercise\", \"data\", \"BEAM_data_clean.rds\"))\n\n\n\nExploring the Data\nNow that the data is clean, I want to do some quick exploration of it before handing it off to the next contributor for a more complete analysis.\nThe following plots will help give a simple overview of what the data looks like without getting into any modeling.\n\nggplot(BEAM_data_clean, aes(Pathogen, Number_of_isolates, color=Pathogen))+\n  geom_col()+\n  labs(title = \"Total Number of Isolates from Each Pathogen Type\")+\n  xlab(\"Pathogen Type\")+\n  ylab(\"Number of Isolates\")+\n  theme_classic()+\n  theme(legend.position = \"none\")\n\n\n\nggplot(grouped_data, aes(Year, sum_isolates, color=Pathogen))+\n geom_smooth()+\n  labs(title = \"Total Number of Isolates for Each Pathogen, 2017-2022\")+\n  xlab(\"Year\")+\n  ylab(\"Number of isolates\")+\n  theme_classic()\n\n\n\n\n\n\nData Analysis\nThere are many interesting questions that can be answered with this dataset. Among these, I am interested in:\n\nThe relationship between source and pathogen type and/or number of isolates\nThe relationship between serovar/species and outbreak association and/or number of new multistate outbreaks\nThe impact of state/year on the number of new multistate outbreaks\n\nHowever, this dataset could be used to address many other questions, and I will leave that to the next contributor’s judgement. Looking forward to seeing how this data will be analyzed!"
  },
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "Seth Lattner",
    "section": "",
    "text": "Welcome to my website and data analysis portfolio.\n\nPlease use the Menu Bar above to look around.\nHave fun!"
  },
  {
    "objectID": "tidytuesday_exercise.html",
    "href": "tidytuesday_exercise.html",
    "title": "Tidy Tuesday Exercise",
    "section": "",
    "text": "This exercise includes data from the Hollywood Age Gaps tidytuesday dataset.\n\n\nLoad Packages/Data\n\n#load packages\nlibrary(tidyverse)\nlibrary(here)\nlibrary(lubridate)\n\n\n# load in data\nage_gaps <- read_csv(here::here(\"tidytuesday_exercise\", \"data\", \"age_gaps.csv\"))\n\nRows: 1155 Columns: 13\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \",\"\nchr (8): movie_name, director, actor_1_name, actor_2_name, character_1_gende...\ndbl (5): release_year, age_difference, couple_number, actor_1_age, actor_2_age\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n\nglimpse(age_gaps)\n\nRows: 1,155\nColumns: 13\n$ movie_name         <chr> \"Harold and Maude\", \"Venus\", \"The Quiet American\", …\n$ release_year       <dbl> 1971, 2006, 2002, 1998, 2010, 1992, 2009, 1999, 199…\n$ director           <chr> \"Hal Ashby\", \"Roger Michell\", \"Phillip Noyce\", \"Joe…\n$ age_difference     <dbl> 52, 50, 49, 45, 43, 42, 40, 39, 38, 38, 36, 36, 35,…\n$ couple_number      <dbl> 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, …\n$ actor_1_name       <chr> \"Ruth Gordon\", \"Peter O'Toole\", \"Michael Caine\", \"D…\n$ actor_2_name       <chr> \"Bud Cort\", \"Jodie Whittaker\", \"Do Thi Hai Yen\", \"T…\n$ character_1_gender <chr> \"woman\", \"man\", \"man\", \"man\", \"man\", \"man\", \"man\", …\n$ character_2_gender <chr> \"man\", \"woman\", \"woman\", \"woman\", \"man\", \"woman\", \"…\n$ actor_1_birthdate  <chr> \"1896-10-30\", \"8/2/1932\", \"3/14/1933\", \"9/17/1930\",…\n$ actor_2_birthdate  <chr> \"3/29/1948\", \"6/3/1982\", \"10/1/1982\", \"11/8/1975\", …\n$ actor_1_age        <dbl> 75, 74, 69, 68, 81, 59, 62, 69, 57, 77, 59, 56, 65,…\n$ actor_2_age        <dbl> 23, 24, 20, 23, 38, 17, 22, 30, 19, 39, 23, 20, 30,…\n\n\n\n\nClean/Explore Data\nThis dataset is pretty clean to start, so I will jump straight into plotting to see if this reveals any interesting trends off the bat. First, I want to plot the age differences by release year.\n\nggplot(data = age_gaps)+\n  geom_point(aes(release_year, age_difference), cex=2, alpha=0.3)+\n  labs(x=\"Release Year\", y=\"Age Difference (Years)\", title = \"Age Difference Between Main Characters by Release Year\")+\n  theme_bw()\n\n\n\n\nThis is a little cluttered, as there are many entries per year in this dataset. I want to look at the average age gap for each year and see if they are changing over time.\n\navg_age_gaps <- age_gaps %>%\n  group_by(release_year) %>%\n  summarize(mean_gap = mean(age_difference))\n\navg_age_gaps %>%\nggplot(aes(release_year, mean_gap))+\n  geom_point( cex=2)+\n  labs(x=\"Release Year\", y=\"Mean Age Gap (Years)\", title = \"Mean Age Gap by Release Year\")+\n  geom_smooth(method = \"lm\", color = \"red\")+\n  theme_bw()\n\n\n\n\nIt seems like the average age difference between characters 1 and 2 are decreasing over time, but I take a look at how many movies are included for each year in this dataset.\n\ntot_by_year <- age_gaps %>%\ngroup_by(release_year) %>%\n  count(age_gaps$movie_names)\n\ntot_by_year %>%\n  ggplot(aes(release_year, n))+\n  geom_line(cex=1.5)+\n  labs(title = \"Total Number of Movies by Release Year\", \n       subtitle = \"Age Gap Dataset\", x=\"Release Year\", y=\"Number of Releases\")+\n  theme_bw()\n\n\n\n\nAs we can see, there is quite a bit of variation in how many movies are included per release year in this dataset, with many more being included from more recent release years. This is definitely something that would have to be taken into consideration during any further analysis.\nLastly, I want to look at differences in gender for both character 1 and 2.\n\ngender_c1 <- age_gaps %>%\n  count(character_1_gender)\ngender_c1\n\n# A tibble: 2 × 2\n  character_1_gender     n\n  <chr>              <int>\n1 man                  941\n2 woman                214\n\ngender_c2 <- age_gaps %>%\n  count(character_2_gender)\ngender_c2\n\n# A tibble: 2 × 2\n  character_2_gender     n\n  <chr>              <int>\n1 man                  215\n2 woman                940"
  },
  {
    "objectID": "visualization_exercise/data/readme.html",
    "href": "visualization_exercise/data/readme.html",
    "title": "My Data Analysis Portfolio",
    "section": "",
    "text": "NBA Win Probabilities\nThis directory contains the data behind the story Every NBA Team’s Chance Of Winning In Every Minute Across Every Game.\nnba.tsv contains the 2014-15 NBA season win probabilities for each team over the course of a game, as of February 18, 2015."
  },
  {
    "objectID": "visualization_exercise.html",
    "href": "visualization_exercise.html",
    "title": "Visualization Exercise",
    "section": "",
    "text": "About the Data\nThis dataset comes from FiveThirtyEight’s article, “Every NBA Team’s Chance Of Winning In Every Minute Across Every Game”. The article analyzes each NBA team’s chance of winning at every minute of a game, averaged across the entire season. The data are available on GitHub. Below is a static image of the interactive figure that I will be attempting to recreate.\n\n\n\nLoading/Cleaning the Data\n\nlibrary(tidyverse)\nlibrary(here)\nlibrary(ggplot2)\nlibrary(plotly)\nlibrary(shiny)\nlibrary(ggthemes)\n\n\nnba_data <- read_tsv(here::here(\"visualization_exercise\", \"data\", \"nba.tsv\"))\nhead(nba_data)\n\n# A tibble: 6 × 50\n  team     `0`   `1`   `2`   `3`   `4`   `5`   `6`   `7`   `8`   `9`  `10`  `11`\n  <chr>  <dbl> <dbl> <dbl> <dbl> <dbl> <dbl> <dbl> <dbl> <dbl> <dbl> <dbl> <dbl>\n1 Hawks  0.507 0.510 0.515 0.516 0.519 0.528 0.533 0.529 0.536 0.540 0.544 0.551\n2 Nets   0.503 0.506 0.509 0.515 0.516 0.512 0.526 0.520 0.520 0.522 0.518 0.515\n3 Celti… 0.501 0.504 0.497 0.496 0.492 0.492 0.488 0.482 0.465 0.464 0.479 0.473\n4 Horne… 0.497 0.493 0.493 0.490 0.484 0.484 0.488 0.483 0.475 0.485 0.485 0.491\n5 Bulls  0.495 0.494 0.500 0.497 0.482 0.478 0.478 0.482 0.484 0.486 0.485 0.493\n6 Caval… 0.506 0.510 0.516 0.528 0.534 0.546 0.546 0.559 0.553 0.544 0.550 0.551\n# … with 37 more variables: `12` <dbl>, `13` <dbl>, `14` <dbl>, `15` <dbl>,\n#   `16` <dbl>, `17` <dbl>, `18` <dbl>, `19` <dbl>, `20` <dbl>, `21` <dbl>,\n#   `22` <dbl>, `23` <dbl>, `24` <dbl>, `25` <dbl>, `26` <dbl>, `27` <dbl>,\n#   `28` <dbl>, `29` <dbl>, `30` <dbl>, `31` <dbl>, `32` <dbl>, `33` <dbl>,\n#   `34` <dbl>, `35` <dbl>, `36` <dbl>, `37` <dbl>, `38` <dbl>, `39` <dbl>,\n#   `40` <dbl>, `41` <dbl>, `42` <dbl>, `43` <dbl>, `44` <dbl>, `45` <dbl>,\n#   `46` <dbl>, `47` <dbl>, `48` <dbl>\n\n\nI will have to reorganize the variables to allow for easier analysis and plotting. Currently, winning percentages are listed for each team at each minute of the game, with the corresponding column labeled after that minute (0, 1, 2,…48). I will need to tidy this to create new columns for minute and win percentage. Once completed, I should have three variables - team, minute, and win percentage.\n\nnba_data <- nba_data %>%\n  tidyr::pivot_longer(!team,\n    names_to = \"minute\",\n    names_prefix = \"min\",\n    values_to = \"win_percentage\",\n    values_drop_na = TRUE ) %>%\n  dplyr::mutate(minute, as.numeric(minute))\n\nnba_data\n\n# A tibble: 1,470 × 4\n   team  minute win_percentage `as.numeric(minute)`\n   <chr> <chr>           <dbl>                <dbl>\n 1 Hawks 0               0.507                    0\n 2 Hawks 1               0.510                    1\n 3 Hawks 2               0.515                    2\n 4 Hawks 3               0.516                    3\n 5 Hawks 4               0.519                    4\n 6 Hawks 5               0.528                    5\n 7 Hawks 6               0.533                    6\n 8 Hawks 7               0.529                    7\n 9 Hawks 8               0.536                    8\n10 Hawks 9               0.540                    9\n# … with 1,460 more rows\n\n\n\n\nPlotting\nI want to create a color palette similar to what was used in the original figure (not aiming for complete accuracy). I will try to match the teams with their corresponding team color.\n\nnba_colors <- c(\"red2\", \"darkgreen\", \"firebrick2\", \"firebrick4\", \"green4\", \"red1\", \"#336699\", \"#000999\", \"#CC0000\", \"#009999\", \"#003399\", \"#660099\", \"#FF6600\", \"#FFF000\", \"#0066FF\", \"#0033CC\", \"black\", \"#66CCFF\", \"#000666\", \"midnightblue\", \"#FF3333\", \"firebrick\", \"red\", \"gray40\", \"#FF6633\", \"#6699FF\", \"#003366\", \"red3\", \"royalblue3\", \"dodgerblue4\")\n\nBefore trying to recreate the interactive portion of the plot, I want to plot a static version to make sure everything looks the way it should.\n\nnba_plot <- ggplot(nba_data, aes(`as.numeric(minute)`, win_percentage, color = team))+\n  geom_line(size=0.5)+\n  geom_hline(yintercept = 0.5, size=0.5, color = \"black\")+\n  theme(axis.line.x = element_blank(),\n       axis.line.y = element_blank(),\n       axis.text = element_text(size = 12))+\n  theme(plot.title = element_text(size = 12))+\n  theme(panel.grid = element_line(colour = \"gray80\"),\n        plot.background = element_rect(fill = \"gray90\" ),\n        panel.background = element_rect(fill = \"gray90\"),\n        panel.grid.minor = element_blank(),\n        legend.key = element_rect(fill = \"gray90\"),\n        legend.background = element_rect(fill = \"gray90\"))+\n  scale_color_manual(values = nba_colors)+\n  scale_x_continuous(breaks = c(0, 12, 24, 36, 48), \n        labels = c(\"Start\", \"2nd Qtr\", \"3rd Qtr\", \"4th Qtr\", \"End\"))+\n  scale_y_continuous(breaks = c(.2, .3, .4, .5, .6, .7, .8), \n        labels = c(\"20\", \"30\", \"40\", \"50\", \"60\", \"70\", \"80%\"))+\n  xlab(\"\")+\n  ylab(\"\")+\n  ggtitle(\"The average chance of the -- winning at any\\npoint in a game this year\")\nnba_plot\n\n\n\n\nThat looks pretty good, but now I want to make the same figure but in an interactive format to match the original. This is not something I have done before, so I will be learning as I go. It seems like the most simple way is to convert the ggplot into an interactive plotly figure using the function plotly::ggplotly.\n\nggplotly(nba_plot)\n\n\n\n\n\nThis was a straightfoward solution, but I would still like to find a way to include the dropdown selection tool from the original FiveThirtyEight figure.\n\n#select some plotly buttons to remove\nremove_buttons <- list('zoom2d','pan2d','lasso2d', 'select2d','zoomIn2d',\n                              'zoomOut2d','autoScale2d','hoverClosestCartesian',\n                              'toggleSpikelines','hoverCompareCartesian')\n\n#replot and filter for team\nnba_plotly <- ggplotly(nba_plot, autosize = F, width = 650, height = 550, \n         transforms = list(\n      list(\n        type = 'filter',\n        target = ~team,\n        operation = '=',\n        value = unique(nba_data$team)[1])))\n\n#remove some buttons to de-clutter\nnba_plotly <- nba_plotly %>%\n  config(displaylogo = FALSE, modeBarButtonsToRemove = remove_buttons) \n\n#remove legend and create dropdown list, this is painful \nnba_plotly <- nba_plotly %>%\n    layout(showlegend = FALSE,\n    updatemenus = list(\n      list(\n        type = 'dropdown',\n        active = 0,\n        buttons = list(\n          list(method = \"restyle\",\n               args = list(\"transforms[0].value\", unique(nba_data$team)[1]),\n               label = unique(nba_data$team)[1]),\n          list(method = \"restyle\",\n               args = list(\"transforms[0].value\", unique(nba_data$team)[2]),\n               label = unique(nba_data$team)[2]),\n          list(method = \"restyle\",\n               args = list(\"transforms[0].value\", unique(nba_data$team)[3]),\n               label = unique(nba_data$team)[3]),\n          list(method = \"restyle\",\n               args = list(\"transforms[0].value\", unique(nba_data$team)[4]),\n               label = unique(nba_data$team)[4]),\n          list(method = \"restyle\",\n               args = list(\"transforms[0].value\", unique(nba_data$team)[5]),\n               label = unique(nba_data$team)[5]),\n          list(method = \"restyle\",\n               args = list(\"transforms[0].value\", unique(nba_data$team)[6]),\n               label = unique(nba_data$team)[6]),\n          list(method = \"restyle\",\n               args = list(\"transforms[0].value\", unique(nba_data$team)[7]),\n               label = unique(nba_data$team)[7]),\n          list(method = \"restyle\",\n               args = list(\"transforms[0].value\", unique(nba_data$team)[8]),\n               label = unique(nba_data$team)[8]),\n          list(method = \"restyle\",\n               args = list(\"transforms[0].value\", unique(nba_data$team)[9]),\n               label = unique(nba_data$team)[9]),\n          list(method = \"restyle\",\n               args = list(\"transforms[0].value\", unique(nba_data$team)[10]),\n               label = unique(nba_data$team)[10]),\n          list(method = \"restyle\",\n               args = list(\"transforms[0].value\", unique(nba_data$team)[11]),\n               label = unique(nba_data$team)[11]),\n          list(method = \"restyle\",\n               args = list(\"transforms[0].value\", unique(nba_data$team)[12]),\n               label = unique(nba_data$team)[12]),\n          list(method = \"restyle\",\n               args = list(\"transforms[0].value\", unique(nba_data$team)[13]),\n               label = unique(nba_data$team)[13]),\n          list(method = \"restyle\",\n               args = list(\"transforms[0].value\", unique(nba_data$team)[14]),\n               label = unique(nba_data$team)[14]),\n          list(method = \"restyle\",\n               args = list(\"transforms[0].value\", unique(nba_data$team)[15]),\n               label = unique(nba_data$team)[15]),\n          list(method = \"restyle\",\n               args = list(\"transforms[0].value\", unique(nba_data$team)[16]),\n               label = unique(nba_data$team)[16]),\n          list(method = \"restyle\",\n               args = list(\"transforms[0].value\", unique(nba_data$team)[17]),\n               label = unique(nba_data$team)[17]),\n          list(method = \"restyle\",\n               args = list(\"transforms[0].value\", unique(nba_data$team)[18]),\n               label = unique(nba_data$team)[18]),\n          list(method = \"restyle\",\n               args = list(\"transforms[0].value\", unique(nba_data$team)[19]),\n               label = unique(nba_data$team)[19]),\n          list(method = \"restyle\",\n               args = list(\"transforms[0].value\", unique(nba_data$team)[20]),\n               label = unique(nba_data$team)[20]),\n          list(method = \"restyle\",\n               args = list(\"transforms[0].value\", unique(nba_data$team)[21]),\n               label = unique(nba_data$team)[21]),\n          list(method = \"restyle\",\n               args = list(\"transforms[0].value\", unique(nba_data$team)[22]),\n               label = unique(nba_data$team)[22]),\n          list(method = \"restyle\",\n               args = list(\"transforms[0].value\", unique(nba_data$team)[23]),\n               label = unique(nba_data$team)[23]),\n          list(method = \"restyle\",\n               args = list(\"transforms[0].value\", unique(nba_data$team)[23]),\n               label = unique(nba_data$team)[23]),\n          list(method = \"restyle\",\n               args = list(\"transforms[0].value\", unique(nba_data$team)[24]),\n               label = unique(nba_data$team)[24]),\n          list(method = \"restyle\",\n               args = list(\"transforms[0].value\", unique(nba_data$team)[25]),\n               label = unique(nba_data$team)[25]),\n          list(method = \"restyle\",\n               args = list(\"transforms[0].value\", unique(nba_data$team)[26]),\n               label = unique(nba_data$team)[26]),\n          list(method = \"restyle\",\n               args = list(\"transforms[0].value\", unique(nba_data$team)[27]),\n               label = unique(nba_data$team)[27]),\n          list(method = \"restyle\",\n               args = list(\"transforms[0].value\", unique(nba_data$team)[28]),\n               label = unique(nba_data$team)[28]),\n          list(method = \"restyle\",\n               args = list(\"transforms[0].value\", unique(nba_data$team)[29]),\n               label = unique(nba_data$team)[29]),\n          list(method = \"restyle\",\n               args = list(\"transforms[0].value\", unique(nba_data$team)[30]),\n               label = unique(nba_data$team)[30])\n        )\n      )\n    )\n  )\n         \nnba_plotly  \n\n\n\n\n\n\n\nFinal Thoughts\nI was successful at creating a dropdown menu, but was unable to actually link it to the figure in a way that made it functional. There also must be an easier way to create the dropdown list without having to code an argument for each team individually, but I can’t find it.\nSome tools I referenced when completing this exercise where the books Interactive Web-Based Data Visualization with R, Plotly, and Shiny and The Epidemiologist R Handbook, along with various webpages and coding forums. The books both contain very helpful information on many aspects of data visualization, including making interactive figures."
  },
  {
    "objectID": "fluanalysis/code/wrangling.html",
    "href": "fluanalysis/code/wrangling.html",
    "title": "Flu Analysis",
    "section": "",
    "text": "This is the first file of a three part data analysis exercise, conducted on the dataset from McKay et al 2020, found here. This file contains data wrangling and cleaning steps in preparation for further analysis.\n\nLoad Packages/Data\n\n#load necessary packages\nlibrary(tidyverse)\nlibrary(ggplot2)\nlibrary(here)\n\n\n#load in data\nflu_raw <- readr::read_rds(here::here(\"fluanalysis\", \"data\", \"SympAct_Any_Pos.Rda\"))\n\n#view data\nglimpse(flu_raw)\n\nRows: 735\nColumns: 63\n$ DxName1           <fct> \"Influenza like illness - Clinical Dx\", \"Acute tonsi…\n$ DxName2           <fct> NA, \"Influenza like illness - Clinical Dx\", \"Acute p…\n$ DxName3           <fct> NA, NA, NA, NA, NA, NA, NA, NA, \"Fever, unspecified\"…\n$ DxName4           <fct> NA, NA, NA, NA, NA, NA, NA, NA, \"Other fatigue\", NA,…\n$ DxName5           <fct> NA, NA, NA, NA, NA, NA, NA, NA, \"Headache\", NA, NA, …\n$ Unique.Visit      <chr> \"340_17632125\", \"340_17794836\", \"342_17737773\", \"342…\n$ ActivityLevel     <int> 10, 6, 2, 2, 5, 3, 4, 0, 0, 5, 9, 1, 3, 6, 5, 2, 2, …\n$ ActivityLevelF    <fct> 10, 6, 2, 2, 5, 3, 4, 0, 0, 5, 9, 1, 3, 6, 5, 2, 2, …\n$ SwollenLymphNodes <fct> Yes, Yes, Yes, Yes, Yes, No, No, No, Yes, No, Yes, Y…\n$ ChestCongestion   <fct> No, Yes, Yes, Yes, No, No, No, Yes, Yes, Yes, Yes, Y…\n$ ChillsSweats      <fct> No, No, Yes, Yes, Yes, Yes, Yes, Yes, Yes, No, Yes, …\n$ NasalCongestion   <fct> No, Yes, Yes, Yes, No, No, No, Yes, Yes, Yes, Yes, Y…\n$ CoughYN           <fct> Yes, Yes, No, Yes, No, Yes, Yes, Yes, Yes, Yes, No, …\n$ Sneeze            <fct> No, No, Yes, Yes, No, Yes, No, Yes, No, No, No, No, …\n$ Fatigue           <fct> Yes, Yes, Yes, Yes, Yes, Yes, Yes, Yes, Yes, Yes, Ye…\n$ SubjectiveFever   <fct> Yes, Yes, Yes, Yes, Yes, Yes, Yes, Yes, Yes, No, Yes…\n$ Headache          <fct> Yes, Yes, Yes, Yes, Yes, Yes, No, Yes, Yes, Yes, Yes…\n$ Weakness          <fct> Mild, Severe, Severe, Severe, Moderate, Moderate, Mi…\n$ WeaknessYN        <fct> Yes, Yes, Yes, Yes, Yes, Yes, Yes, Yes, Yes, Yes, Ye…\n$ CoughIntensity    <fct> Severe, Severe, Mild, Moderate, None, Moderate, Seve…\n$ CoughYN2          <fct> Yes, Yes, Yes, Yes, No, Yes, Yes, Yes, Yes, Yes, Yes…\n$ Myalgia           <fct> Mild, Severe, Severe, Severe, Mild, Moderate, Mild, …\n$ MyalgiaYN         <fct> Yes, Yes, Yes, Yes, Yes, Yes, Yes, Yes, Yes, Yes, Ye…\n$ RunnyNose         <fct> No, No, Yes, Yes, No, No, Yes, Yes, Yes, Yes, No, No…\n$ AbPain            <fct> No, No, Yes, No, No, No, No, No, No, No, Yes, Yes, N…\n$ ChestPain         <fct> No, No, Yes, No, No, Yes, Yes, No, No, No, No, Yes, …\n$ Diarrhea          <fct> No, No, No, No, No, Yes, No, No, No, No, No, No, No,…\n$ EyePn             <fct> No, No, No, No, Yes, No, No, No, No, No, Yes, No, Ye…\n$ Insomnia          <fct> No, No, Yes, Yes, Yes, No, No, Yes, Yes, Yes, Yes, Y…\n$ ItchyEye          <fct> No, No, No, No, No, No, No, No, No, No, No, No, Yes,…\n$ Nausea            <fct> No, No, Yes, Yes, Yes, Yes, No, No, Yes, Yes, Yes, Y…\n$ EarPn             <fct> No, Yes, No, Yes, No, No, No, No, No, No, No, Yes, Y…\n$ Hearing           <fct> No, Yes, No, No, No, No, No, No, No, No, No, No, No,…\n$ Pharyngitis       <fct> Yes, Yes, Yes, Yes, Yes, Yes, Yes, No, No, No, Yes, …\n$ Breathless        <fct> No, No, Yes, No, No, Yes, No, No, No, Yes, No, Yes, …\n$ ToothPn           <fct> No, No, Yes, No, No, No, No, No, Yes, No, No, Yes, N…\n$ Vision            <fct> No, No, No, No, No, No, No, No, No, No, No, No, No, …\n$ Vomit             <fct> No, No, No, No, No, No, Yes, No, No, No, Yes, Yes, N…\n$ Wheeze            <fct> No, No, No, Yes, No, Yes, No, No, No, No, No, Yes, N…\n$ BodyTemp          <dbl> 98.3, 100.4, 100.8, 98.8, 100.5, 98.4, 102.5, 98.4, …\n$ RapidFluA         <fct> Presumptive Negative For Influenza A, NA, Presumptiv…\n$ RapidFluB         <fct> Presumptive Negative For Influenza B, NA, Presumptiv…\n$ PCRFluA           <fct> NA, NA, NA, NA, NA, NA,  Influenza A Not Detected, N…\n$ PCRFluB           <fct> NA, NA, NA, NA, NA, NA,  Influenza B Not Detected, N…\n$ TransScore1       <dbl> 1, 3, 4, 5, 0, 2, 2, 5, 4, 4, 2, 3, 2, 5, 3, 5, 1, 5…\n$ TransScore1F      <fct> 1, 3, 4, 5, 0, 2, 2, 5, 4, 4, 2, 3, 2, 5, 3, 5, 1, 5…\n$ TransScore2       <dbl> 1, 2, 3, 4, 0, 2, 2, 4, 3, 3, 1, 2, 2, 4, 2, 4, 1, 4…\n$ TransScore2F      <fct> 1, 2, 3, 4, 0, 2, 2, 4, 3, 3, 1, 2, 2, 4, 2, 4, 1, 4…\n$ TransScore3       <dbl> 1, 1, 2, 3, 0, 2, 2, 3, 2, 2, 0, 1, 1, 3, 1, 3, 1, 3…\n$ TransScore3F      <fct> 1, 1, 2, 3, 0, 2, 2, 3, 2, 2, 0, 1, 1, 3, 1, 3, 1, 3…\n$ TransScore4       <dbl> 0, 2, 4, 4, 0, 1, 1, 4, 3, 3, 2, 2, 2, 4, 3, 4, 0, 4…\n$ TransScore4F      <fct> 0, 2, 4, 4, 0, 1, 1, 4, 3, 3, 2, 2, 2, 4, 3, 4, 0, 4…\n$ ImpactScore       <int> 7, 8, 14, 12, 11, 12, 8, 7, 10, 7, 13, 17, 11, 13, 9…\n$ ImpactScore2      <int> 6, 7, 13, 11, 10, 11, 7, 6, 9, 6, 12, 16, 10, 12, 8,…\n$ ImpactScore3      <int> 3, 4, 9, 7, 6, 7, 3, 3, 6, 4, 7, 11, 6, 8, 4, 4, 5, …\n$ ImpactScoreF      <fct> 7, 8, 14, 12, 11, 12, 8, 7, 10, 7, 13, 17, 11, 13, 9…\n$ ImpactScore2F     <fct> 6, 7, 13, 11, 10, 11, 7, 6, 9, 6, 12, 16, 10, 12, 8,…\n$ ImpactScore3F     <fct> 3, 4, 9, 7, 6, 7, 3, 3, 6, 4, 7, 11, 6, 8, 4, 4, 5, …\n$ ImpactScoreFD     <fct> 7, 8, 14, 12, 11, 12, 8, 7, 10, 7, 13, 17, 11, 13, 9…\n$ TotalSymp1        <dbl> 8, 11, 18, 17, 11, 14, 10, 12, 14, 11, 15, 20, 13, 1…\n$ TotalSymp1F       <fct> 8, 11, 18, 17, 11, 14, 10, 12, 14, 11, 15, 20, 13, 1…\n$ TotalSymp2        <dbl> 8, 10, 17, 16, 11, 14, 10, 11, 13, 10, 14, 19, 13, 1…\n$ TotalSymp3        <dbl> 8, 9, 16, 15, 11, 14, 10, 10, 12, 9, 13, 18, 12, 16,…\n\nsummary(flu_raw)\n\n                                           DxName1   \n Influenza like illness - Clinical Dx          :328  \n Influenza - Virus Identified                  :131  \n Fever, unspecified                            :101  \n Cough                                         : 66  \n Acute pharyngitis, unspecified                : 50  \n Acute upper respiratory infection, unspecified: 22  \n (Other)                                       : 37  \n                                 DxName2   \n Influenza - Virus Identified        :126  \n Influenza like illness - Clinical Dx:115  \n Fever, unspecified                  : 45  \n Cough                               : 41  \n Acute pharyngitis, unspecified      : 31  \n (Other)                             : 97  \n NA's                                :280  \n                                 DxName3   \n Influenza - Virus Identified        : 23  \n Influenza like illness - Clinical Dx: 14  \n Cough                               : 10  \n Fever, unspecified                  :  6  \n Acute pharyngitis, unspecified      :  4  \n (Other)                             : 52  \n NA's                                :626  \n                                           DxName4   \n Influenza - Virus Identified                  :  3  \n Acute upper respiratory infection, unspecified:  2  \n Encounter for immunization                    :  2  \n Influenza like illness - Clinical Dx          :  2  \n Acute pharyngitis, unspecified                :  1  \n (Other)                                       :  9  \n NA's                                          :716  \n                                                                                               DxName5   \n Acute suppurative otitis media without spontaneous rupture of ear drum, right ear                 :  0  \n Encounter for immunization                                                                        :  0  \n Headache                                                                                          :  1  \n Other infectious mononucleosis without complication                                               :  0  \n Strain of other flexor muscle, fascia and tendon at forearm level, right arm, subsequent encounter:  0  \n NA's                                                                                              :734  \n                                                                                                         \n Unique.Visit       ActivityLevel    ActivityLevelF SwollenLymphNodes\n Length:735         Min.   : 0.000   3      :125    No :421          \n Class :character   1st Qu.: 3.000   5      : 97    Yes:314          \n Mode  :character   Median : 4.000   4      : 95                     \n                    Mean   : 4.463   2      : 80                     \n                    3rd Qu.: 6.000   7      : 68                     \n                    Max.   :10.000   6      : 66                     \n                                     (Other):204                     \n ChestCongestion ChillsSweats NasalCongestion CoughYN   Sneeze    Fatigue  \n No :326         No :131      No :170         No : 75   No :340   No : 64  \n Yes:409         Yes:604      Yes:565         Yes:660   Yes:395   Yes:671  \n                                                                           \n                                                                           \n                                                                           \n                                                                           \n                                                                           \n SubjectiveFever Headache      Weakness   WeaknessYN  CoughIntensity CoughYN2 \n No :230         No :115   None    : 49   No : 49    None    : 47    No : 47  \n Yes:505         Yes:620   Mild    :224   Yes:686    Mild    :156    Yes:688  \n                           Moderate:341              Moderate:360             \n                           Severe  :121              Severe  :172             \n                                                                              \n                                                                              \n                                                                              \n     Myalgia    MyalgiaYN RunnyNose AbPain    ChestPain Diarrhea  EyePn    \n None    : 79   No : 79   No :211   No :642   No :501   No :636   No :622  \n Mild    :214   Yes:656   Yes:524   Yes: 93   Yes:234   Yes: 99   Yes:113  \n Moderate:327                                                              \n Severe  :115                                                              \n                                                                           \n                                                                           \n                                                                           \n Insomnia  ItchyEye  Nausea    EarPn     Hearing   Pharyngitis Breathless\n No :316   No :553   No :477   No :573   No :705   No :121     No :438   \n Yes:419   Yes:182   Yes:258   Yes:162   Yes: 30   Yes:614     Yes:297   \n                                                                         \n                                                                         \n                                                                         \n                                                                         \n                                                                         \n ToothPn   Vision    Vomit     Wheeze       BodyTemp     \n No :569   No :716   No :656   No :514   Min.   : 97.20  \n Yes:166   Yes: 19   Yes: 79   Yes:221   1st Qu.: 98.20  \n                                         Median : 98.50  \n                                         Mean   : 98.94  \n                                         3rd Qu.: 99.30  \n                                         Max.   :103.10  \n                                         NA's   :5       \n                                RapidFluA  \n Positive for Influenza A            :169  \n Presumptive Negative For Influenza A:159  \n NA's                                :407  \n                                           \n                                           \n                                           \n                                           \n                                RapidFluB                        PCRFluA   \n Positive for Influenza B            : 26    Influenza A Detected    :120  \n Presumptive Negative For Influenza B:302    Influenza A Not Detected: 33  \n NA's                                :407   Assay Invalid            :  0  \n                                            Indeterminate            :  1  \n                                            NA's                     :581  \n                                                                           \n                                                                           \n                      PCRFluB     TransScore1    TransScore1F  TransScore2   \n  Influenza B Detected    :  9   Min.   :0.000   0: 13        Min.   :0.000  \n  Influenza B Not Detected:145   1st Qu.:3.000   1: 53        1st Qu.:2.000  \n Assay Invalid            :  0   Median :4.000   2:107        Median :3.000  \n NA's                     :581   Mean   :3.473   3:157        Mean   :2.917  \n                                 3rd Qu.:5.000   4:210        3rd Qu.:4.000  \n                                 Max.   :5.000   5:195        Max.   :4.000  \n                                                                             \n TransScore2F  TransScore3    TransScore3F  TransScore4    TransScore4F\n 0: 13        Min.   :0.000   0: 24        Min.   :0.000   0: 50       \n 1: 89        1st Qu.:1.000   1:166        1st Qu.:2.000   1:103       \n 2:138        Median :2.000   2:222        Median :3.000   2:154       \n 3:201        Mean   :2.148   3:323        Mean   :2.576   3:230       \n 4:294        3rd Qu.:3.000                3rd Qu.:4.000   4:198       \n              Max.   :3.000                Max.   :4.000               \n                                                                       \n  ImpactScore      ImpactScore2     ImpactScore3    ImpactScoreF ImpactScore2F\n Min.   : 2.000   Min.   : 2.000   Min.   : 0.00   8      :105   7      :107  \n 1st Qu.: 8.000   1st Qu.: 7.000   1st Qu.: 3.00   9      :104   8      :102  \n Median : 9.000   Median : 8.000   Median : 5.00   10     : 88   9      : 90  \n Mean   : 9.514   Mean   : 8.581   Mean   : 5.06   7      : 84   10     : 86  \n 3rd Qu.:11.000   3rd Qu.:10.000   3rd Qu.: 7.00   11     : 82   6      : 85  \n Max.   :18.000   Max.   :17.000   Max.   :13.00   12     : 58   11     : 59  \n                                                   (Other):214   (Other):206  \n ImpactScore3F ImpactScoreFD   TotalSymp1     TotalSymp1F    TotalSymp2   \n 4      :134   8      :105   Min.   : 5.00   12     : 86   Min.   : 4.00  \n 5      :112   9      :104   1st Qu.:11.00   13     : 84   1st Qu.:10.00  \n 3      :108   10     : 88   Median :13.00   14     : 80   Median :12.00  \n 6      :102   7      : 84   Mean   :12.99   11     : 72   Mean   :12.43  \n 7      : 66   11     : 82   3rd Qu.:15.00   10     : 62   3rd Qu.:15.00  \n 2      : 64   12     : 58   Max.   :23.00   15     : 61   Max.   :22.00  \n (Other):149   (Other):214                   (Other):290                  \n   TotalSymp3   \n Min.   : 3.00  \n 1st Qu.:10.00  \n Median :12.00  \n Mean   :11.66  \n 3rd Qu.:14.00  \n Max.   :21.00  \n                \n\n\n\n\nCleaning/Wrangling\nThis dataset will require a small amount of cleaning - namely, I will remove some variables that will not be useful for future analysis and remove missing values.\n\nflu_data <- flu_raw %>%\n  select(-contains(c(\"Score\", \"Total\", \"DxName\", \"Activity\", \"FluA\", \"FluB\", \"Unique.Visit\"))) %>%\n  drop_na()\nglimpse(flu_data)\n\nRows: 730\nColumns: 32\n$ SwollenLymphNodes <fct> Yes, Yes, Yes, Yes, Yes, No, No, No, Yes, No, Yes, Y…\n$ ChestCongestion   <fct> No, Yes, Yes, Yes, No, No, No, Yes, Yes, Yes, Yes, Y…\n$ ChillsSweats      <fct> No, No, Yes, Yes, Yes, Yes, Yes, Yes, Yes, No, Yes, …\n$ NasalCongestion   <fct> No, Yes, Yes, Yes, No, No, No, Yes, Yes, Yes, Yes, Y…\n$ CoughYN           <fct> Yes, Yes, No, Yes, No, Yes, Yes, Yes, Yes, Yes, No, …\n$ Sneeze            <fct> No, No, Yes, Yes, No, Yes, No, Yes, No, No, No, No, …\n$ Fatigue           <fct> Yes, Yes, Yes, Yes, Yes, Yes, Yes, Yes, Yes, Yes, Ye…\n$ SubjectiveFever   <fct> Yes, Yes, Yes, Yes, Yes, Yes, Yes, Yes, Yes, No, Yes…\n$ Headache          <fct> Yes, Yes, Yes, Yes, Yes, Yes, No, Yes, Yes, Yes, Yes…\n$ Weakness          <fct> Mild, Severe, Severe, Severe, Moderate, Moderate, Mi…\n$ WeaknessYN        <fct> Yes, Yes, Yes, Yes, Yes, Yes, Yes, Yes, Yes, Yes, Ye…\n$ CoughIntensity    <fct> Severe, Severe, Mild, Moderate, None, Moderate, Seve…\n$ CoughYN2          <fct> Yes, Yes, Yes, Yes, No, Yes, Yes, Yes, Yes, Yes, Yes…\n$ Myalgia           <fct> Mild, Severe, Severe, Severe, Mild, Moderate, Mild, …\n$ MyalgiaYN         <fct> Yes, Yes, Yes, Yes, Yes, Yes, Yes, Yes, Yes, Yes, Ye…\n$ RunnyNose         <fct> No, No, Yes, Yes, No, No, Yes, Yes, Yes, Yes, No, No…\n$ AbPain            <fct> No, No, Yes, No, No, No, No, No, No, No, Yes, Yes, N…\n$ ChestPain         <fct> No, No, Yes, No, No, Yes, Yes, No, No, No, No, Yes, …\n$ Diarrhea          <fct> No, No, No, No, No, Yes, No, No, No, No, No, No, No,…\n$ EyePn             <fct> No, No, No, No, Yes, No, No, No, No, No, Yes, No, Ye…\n$ Insomnia          <fct> No, No, Yes, Yes, Yes, No, No, Yes, Yes, Yes, Yes, Y…\n$ ItchyEye          <fct> No, No, No, No, No, No, No, No, No, No, No, No, Yes,…\n$ Nausea            <fct> No, No, Yes, Yes, Yes, Yes, No, No, Yes, Yes, Yes, Y…\n$ EarPn             <fct> No, Yes, No, Yes, No, No, No, No, No, No, No, Yes, Y…\n$ Hearing           <fct> No, Yes, No, No, No, No, No, No, No, No, No, No, No,…\n$ Pharyngitis       <fct> Yes, Yes, Yes, Yes, Yes, Yes, Yes, No, No, No, Yes, …\n$ Breathless        <fct> No, No, Yes, No, No, Yes, No, No, No, Yes, No, Yes, …\n$ ToothPn           <fct> No, No, Yes, No, No, No, No, No, Yes, No, No, Yes, N…\n$ Vision            <fct> No, No, No, No, No, No, No, No, No, No, No, No, No, …\n$ Vomit             <fct> No, No, No, No, No, No, Yes, No, No, No, Yes, Yes, N…\n$ Wheeze            <fct> No, No, No, Yes, No, Yes, No, No, No, No, No, Yes, N…\n$ BodyTemp          <dbl> 98.3, 100.4, 100.8, 98.8, 100.5, 98.4, 102.5, 98.4, …\n\n\n\n\nSave Cleaned Data\nThis completes the data cleaning that I will be doing, so I will now save the clean data as a new RDS file.\n\nflu_data %>%\n  saveRDS(here::here(\"fluanalysis\", \"data\", \"flu_data_clean.RDS\"))"
  },
  {
    "objectID": "fluanalysis/code/exploration.html",
    "href": "fluanalysis/code/exploration.html",
    "title": "Flu Analysis",
    "section": "",
    "text": "This is the second file of a three part data analysis exercise, conducted on the dataset from McKay et al 2020, found here. This file contains data exploration steps in preparation for further analysis.\n\nLoad Data/Packages\n\n#load necessary packages\nlibrary(tidyverse)\nlibrary(ggplot2)\nlibrary(kableExtra)\nlibrary(here)\n\n\n#load and view data\nflu_data <- readRDS(here::here(\"fluanalysis\", \"data\", \"flu_data_clean.RDS\"))\nglimpse(flu_data)\n\nRows: 730\nColumns: 32\n$ SwollenLymphNodes <fct> Yes, Yes, Yes, Yes, Yes, No, No, No, Yes, No, Yes, Y…\n$ ChestCongestion   <fct> No, Yes, Yes, Yes, No, No, No, Yes, Yes, Yes, Yes, Y…\n$ ChillsSweats      <fct> No, No, Yes, Yes, Yes, Yes, Yes, Yes, Yes, No, Yes, …\n$ NasalCongestion   <fct> No, Yes, Yes, Yes, No, No, No, Yes, Yes, Yes, Yes, Y…\n$ CoughYN           <fct> Yes, Yes, No, Yes, No, Yes, Yes, Yes, Yes, Yes, No, …\n$ Sneeze            <fct> No, No, Yes, Yes, No, Yes, No, Yes, No, No, No, No, …\n$ Fatigue           <fct> Yes, Yes, Yes, Yes, Yes, Yes, Yes, Yes, Yes, Yes, Ye…\n$ SubjectiveFever   <fct> Yes, Yes, Yes, Yes, Yes, Yes, Yes, Yes, Yes, No, Yes…\n$ Headache          <fct> Yes, Yes, Yes, Yes, Yes, Yes, No, Yes, Yes, Yes, Yes…\n$ Weakness          <fct> Mild, Severe, Severe, Severe, Moderate, Moderate, Mi…\n$ WeaknessYN        <fct> Yes, Yes, Yes, Yes, Yes, Yes, Yes, Yes, Yes, Yes, Ye…\n$ CoughIntensity    <fct> Severe, Severe, Mild, Moderate, None, Moderate, Seve…\n$ CoughYN2          <fct> Yes, Yes, Yes, Yes, No, Yes, Yes, Yes, Yes, Yes, Yes…\n$ Myalgia           <fct> Mild, Severe, Severe, Severe, Mild, Moderate, Mild, …\n$ MyalgiaYN         <fct> Yes, Yes, Yes, Yes, Yes, Yes, Yes, Yes, Yes, Yes, Ye…\n$ RunnyNose         <fct> No, No, Yes, Yes, No, No, Yes, Yes, Yes, Yes, No, No…\n$ AbPain            <fct> No, No, Yes, No, No, No, No, No, No, No, Yes, Yes, N…\n$ ChestPain         <fct> No, No, Yes, No, No, Yes, Yes, No, No, No, No, Yes, …\n$ Diarrhea          <fct> No, No, No, No, No, Yes, No, No, No, No, No, No, No,…\n$ EyePn             <fct> No, No, No, No, Yes, No, No, No, No, No, Yes, No, Ye…\n$ Insomnia          <fct> No, No, Yes, Yes, Yes, No, No, Yes, Yes, Yes, Yes, Y…\n$ ItchyEye          <fct> No, No, No, No, No, No, No, No, No, No, No, No, Yes,…\n$ Nausea            <fct> No, No, Yes, Yes, Yes, Yes, No, No, Yes, Yes, Yes, Y…\n$ EarPn             <fct> No, Yes, No, Yes, No, No, No, No, No, No, No, Yes, Y…\n$ Hearing           <fct> No, Yes, No, No, No, No, No, No, No, No, No, No, No,…\n$ Pharyngitis       <fct> Yes, Yes, Yes, Yes, Yes, Yes, Yes, No, No, No, Yes, …\n$ Breathless        <fct> No, No, Yes, No, No, Yes, No, No, No, Yes, No, Yes, …\n$ ToothPn           <fct> No, No, Yes, No, No, No, No, No, Yes, No, No, Yes, N…\n$ Vision            <fct> No, No, No, No, No, No, No, No, No, No, No, No, No, …\n$ Vomit             <fct> No, No, No, No, No, No, Yes, No, No, No, Yes, Yes, N…\n$ Wheeze            <fct> No, No, No, Yes, No, Yes, No, No, No, No, No, Yes, N…\n$ BodyTemp          <dbl> 98.3, 100.4, 100.8, 98.8, 100.5, 98.4, 102.5, 98.4, …\n\n\n\n\nExplore Data\nLet’s take a look at some summary stats for this dataset.\n\nsummary(flu_data)\n\n SwollenLymphNodes ChestCongestion ChillsSweats NasalCongestion CoughYN  \n No :418           No :323         No :130      No :167         No : 75  \n Yes:312           Yes:407         Yes:600      Yes:563         Yes:655  \n                                                                         \n                                                                         \n                                                                         \n                                                                         \n Sneeze    Fatigue   SubjectiveFever Headache      Weakness   WeaknessYN\n No :339   No : 64   No :230         No :115   None    : 49   No : 49   \n Yes:391   Yes:666   Yes:500         Yes:615   Mild    :223   Yes:681   \n                                               Moderate:338             \n                                               Severe  :120             \n                                                                        \n                                                                        \n  CoughIntensity CoughYN2      Myalgia    MyalgiaYN RunnyNose AbPain   \n None    : 47    No : 47   None    : 79   No : 79   No :211   No :639  \n Mild    :154    Yes:683   Mild    :213   Yes:651   Yes:519   Yes: 91  \n Moderate:357              Moderate:325                                \n Severe  :172              Severe  :113                                \n                                                                       \n                                                                       \n ChestPain Diarrhea  EyePn     Insomnia  ItchyEye  Nausea    EarPn    \n No :497   No :631   No :617   No :315   No :551   No :475   No :568  \n Yes:233   Yes: 99   Yes:113   Yes:415   Yes:179   Yes:255   Yes:162  \n                                                                      \n                                                                      \n                                                                      \n                                                                      \n Hearing   Pharyngitis Breathless ToothPn   Vision    Vomit     Wheeze   \n No :700   No :119     No :436    No :565   No :711   No :652   No :510  \n Yes: 30   Yes:611     Yes:294    Yes:165   Yes: 19   Yes: 78   Yes:220  \n                                                                         \n                                                                         \n                                                                         \n                                                                         \n    BodyTemp     \n Min.   : 97.20  \n 1st Qu.: 98.20  \n Median : 98.50  \n Mean   : 98.94  \n 3rd Qu.: 99.30  \n Max.   :103.10  \n\n\nThe two main outcomes of interest are BodyTemp and Nausea. I will plot a number of variables against these outcomes to see if any trends are immediately noticeable.\nFirst, I want to look at histogram of body temperature to see the range and distribution.\n\nflu_data %>%\n  ggplot()+\n  geom_histogram(aes(BodyTemp))+\n  theme_classic()\n\n`stat_bin()` using `bins = 30`. Pick better value with `binwidth`.\n\n\n\n\n\nThis shows that a majority of patients recorded temperatures in a normal (non-fever) range. A decent proportion had temperatures between 99-100 F, with fewer being above 100 F. Temperatures up to 103.1 F were recorded.\n\n\nBody Temperature\nNow I will look at a number of plots comparing body temperature vs some relevant categorical predictors.\nBoxplot of body temperature vs reported fever symptoms.\n\nggplot(flu_data, aes(BodyTemp, SubjectiveFever))+\n  geom_boxplot(fill=\"gray90\")+\n  theme_classic()\n\n\n\n\nIt looks like in general, patients reporting fever symptoms had higher body temperatures than those that did not. The interquartile range for patients reporting fevers falls between normal temperature to low-grade fever. Several patients with body temperatures above 100 F did not report any fever symptoms.\nBoxplot of body temperature vs reported chills/sweats.\n\nggplot(flu_data, aes(BodyTemp, ChillsSweats))+\n  geom_boxplot(fill=\"gray90\")+\n  theme_classic()\n\n\n\n\nIt seems that patients with higher body temperatures experienced chills/sweats slightly more commonly than those with lower body temperatures.\nBoxplot of body temperature vs reported weakness.\n\nggplot(flu_data, aes(BodyTemp, Weakness))+\n  geom_boxplot(fill=\"gray90\")+\n  theme_classic()\n\n\n\n\nIn general, higher body temperatures were recorded in patients experiencing severe weakness than those with moderate, mild, or no weakness.\nBoxplot of body temperature vs cough intensity (ranked).\n\nggplot(flu_data, aes(BodyTemp, CoughIntensity))+\n  geom_boxplot(fill=\"gray90\")+\n  theme_classic()\n\n\n\n\nIn general, higher body temperatures were recorded in patients experiencing severe cough intensity than those with moderate, mild, or no coughing.\nBoxplot of body temperature vs myalgia.\n\nggplot(flu_data, aes(BodyTemp, Myalgia))+\n  geom_boxplot(fill=\"gray90\")+\n  theme_classic()\n\n\n\n\nIn general, higher body temperatures were recorded in patients experiencing severe myalgia than those with moderate, mild, or no myalgia.\n\n\nNausea\nNow I want to visualize nausea as predicted by a number of categorical variables.\nNausea vs reported abdominal pain\n\nggplot(flu_data, aes(Nausea))+\n  geom_histogram(aes(fill=AbPain), stat = \"count\")+\n  theme_classic()\n\nWarning in geom_histogram(aes(fill = AbPain), stat = \"count\"): Ignoring unknown\nparameters: `binwidth`, `bins`, and `pad`\n\n\n\n\n\nAbdominal pain was reported more often in patients experiencing nausea.\nNausea vs reported vomitting\n\nggplot(flu_data, aes(Nausea))+\n  geom_histogram(aes(fill=Vomit), stat = \"count\")+\n  theme_classic()\n\nWarning in geom_histogram(aes(fill = Vomit), stat = \"count\"): Ignoring unknown\nparameters: `binwidth`, `bins`, and `pad`\n\n\n\n\n\nVomitting was reported more often in patients experiencing nausea.\nNausea vs reported diarrhea\n\nggplot(flu_data, aes(Nausea))+\n  geom_histogram(aes(fill=Diarrhea), stat = \"count\")+\n  theme_classic()\n\nWarning in geom_histogram(aes(fill = Diarrhea), stat = \"count\"): Ignoring\nunknown parameters: `binwidth`, `bins`, and `pad`\n\n\n\n\n\nDiarrhea was reported more often in patients experiencing nausea.\nNausea vs reported chills/sweats\n\nggplot(flu_data, aes(Nausea))+\n  geom_histogram(aes(fill=ChillsSweats), stat = \"count\")+\n  theme_classic()\n\nWarning in geom_histogram(aes(fill = ChillsSweats), stat = \"count\"): Ignoring\nunknown parameters: `binwidth`, `bins`, and `pad`\n\n\n\n\n\nChills/sweats were reported more often in patients experiencing nausea."
  },
  {
    "objectID": "fluanalysis/code/fitting.html",
    "href": "fluanalysis/code/fitting.html",
    "title": "Flu Analysis",
    "section": "",
    "text": "This is the final file of a three part data analysis exercise, conducted on the dataset from McKay et al 2020, found here. This file contains data analysis and model fitting.\n\nLoad Data/Packages\n\n#load necessary packages\nlibrary(tidyverse)\nlibrary(tidymodels)\nlibrary(kableExtra)\nlibrary(here)\nlibrary(performance)\n\n\n#load and view data\nflu_data <- readRDS(here::here(\"fluanalysis\", \"data\", \"flu_data_clean.RDS\"))\nglimpse(flu_data)\n\nRows: 730\nColumns: 32\n$ SwollenLymphNodes <fct> Yes, Yes, Yes, Yes, Yes, No, No, No, Yes, No, Yes, Y…\n$ ChestCongestion   <fct> No, Yes, Yes, Yes, No, No, No, Yes, Yes, Yes, Yes, Y…\n$ ChillsSweats      <fct> No, No, Yes, Yes, Yes, Yes, Yes, Yes, Yes, No, Yes, …\n$ NasalCongestion   <fct> No, Yes, Yes, Yes, No, No, No, Yes, Yes, Yes, Yes, Y…\n$ CoughYN           <fct> Yes, Yes, No, Yes, No, Yes, Yes, Yes, Yes, Yes, No, …\n$ Sneeze            <fct> No, No, Yes, Yes, No, Yes, No, Yes, No, No, No, No, …\n$ Fatigue           <fct> Yes, Yes, Yes, Yes, Yes, Yes, Yes, Yes, Yes, Yes, Ye…\n$ SubjectiveFever   <fct> Yes, Yes, Yes, Yes, Yes, Yes, Yes, Yes, Yes, No, Yes…\n$ Headache          <fct> Yes, Yes, Yes, Yes, Yes, Yes, No, Yes, Yes, Yes, Yes…\n$ Weakness          <fct> Mild, Severe, Severe, Severe, Moderate, Moderate, Mi…\n$ WeaknessYN        <fct> Yes, Yes, Yes, Yes, Yes, Yes, Yes, Yes, Yes, Yes, Ye…\n$ CoughIntensity    <fct> Severe, Severe, Mild, Moderate, None, Moderate, Seve…\n$ CoughYN2          <fct> Yes, Yes, Yes, Yes, No, Yes, Yes, Yes, Yes, Yes, Yes…\n$ Myalgia           <fct> Mild, Severe, Severe, Severe, Mild, Moderate, Mild, …\n$ MyalgiaYN         <fct> Yes, Yes, Yes, Yes, Yes, Yes, Yes, Yes, Yes, Yes, Ye…\n$ RunnyNose         <fct> No, No, Yes, Yes, No, No, Yes, Yes, Yes, Yes, No, No…\n$ AbPain            <fct> No, No, Yes, No, No, No, No, No, No, No, Yes, Yes, N…\n$ ChestPain         <fct> No, No, Yes, No, No, Yes, Yes, No, No, No, No, Yes, …\n$ Diarrhea          <fct> No, No, No, No, No, Yes, No, No, No, No, No, No, No,…\n$ EyePn             <fct> No, No, No, No, Yes, No, No, No, No, No, Yes, No, Ye…\n$ Insomnia          <fct> No, No, Yes, Yes, Yes, No, No, Yes, Yes, Yes, Yes, Y…\n$ ItchyEye          <fct> No, No, No, No, No, No, No, No, No, No, No, No, Yes,…\n$ Nausea            <fct> No, No, Yes, Yes, Yes, Yes, No, No, Yes, Yes, Yes, Y…\n$ EarPn             <fct> No, Yes, No, Yes, No, No, No, No, No, No, No, Yes, Y…\n$ Hearing           <fct> No, Yes, No, No, No, No, No, No, No, No, No, No, No,…\n$ Pharyngitis       <fct> Yes, Yes, Yes, Yes, Yes, Yes, Yes, No, No, No, Yes, …\n$ Breathless        <fct> No, No, Yes, No, No, Yes, No, No, No, Yes, No, Yes, …\n$ ToothPn           <fct> No, No, Yes, No, No, No, No, No, Yes, No, No, Yes, N…\n$ Vision            <fct> No, No, No, No, No, No, No, No, No, No, No, No, No, …\n$ Vomit             <fct> No, No, No, No, No, No, Yes, No, No, No, Yes, Yes, N…\n$ Wheeze            <fct> No, No, No, Yes, No, Yes, No, No, No, No, No, Yes, N…\n$ BodyTemp          <dbl> 98.3, 100.4, 100.8, 98.8, 100.5, 98.4, 102.5, 98.4, …\n\n\n\n\nModel Fitting\n\nBody Temperature\nFirst, I want to fit a linear regression model using our first outcome of interest, body temperature, and a single predictor variable, runny nose.\n\nflu_lm1 <- linear_reg() %>%\n  set_engine(\"lm\") %>%\n  fit(BodyTemp ~ RunnyNose, data = flu_data)\nkableExtra::kable(tidy(flu_lm1)) %>%\n  kableExtra::kable_classic(full_width = FALSE, font = \"Arial\")\n\n\n\n \n  \n    term \n    estimate \n    std.error \n    statistic \n    p.value \n  \n \n\n  \n    (Intercept) \n    99.1431280 \n    0.0819076 \n    1210.425819 \n    0.00000 \n  \n  \n    RunnyNoseYes \n    -0.2926463 \n    0.0971409 \n    -3.012595 \n    0.00268 \n  \n\n\n\n\nglance(flu_lm1)\n\n# A tibble: 1 × 12\n  r.squ…¹ adj.r…² sigma stati…³ p.value    df logLik   AIC   BIC devia…⁴ df.re…⁵\n    <dbl>   <dbl> <dbl>   <dbl>   <dbl> <dbl>  <dbl> <dbl> <dbl>   <dbl>   <int>\n1  0.0123  0.0110  1.19    9.08 0.00268     1 -1162. 2329. 2343.   1031.     728\n# … with 1 more variable: nobs <int>, and abbreviated variable names\n#   ¹​r.squared, ²​adj.r.squared, ³​statistic, ⁴​deviance, ⁵​df.residual\n\n\nBased on the R-squared value and the RMSE, this does not seem to be a great fit to the data. I want to throw in all of the other variables into a global model and see if this does a better job of explaining the data than the first model.\n\nflu_lm2 <- linear_reg() %>%\n  set_engine(\"lm\") %>%\n  fit(BodyTemp ~ . , data = flu_data)\nkableExtra::kable(tidy(flu_lm2)) %>%\n  kableExtra::kable_classic(full_width = FALSE, font = \"Arial\")\n\n\n\n \n  \n    term \n    estimate \n    std.error \n    statistic \n    p.value \n  \n \n\n  \n    (Intercept) \n    97.9252434 \n    0.3038043 \n    322.3300394 \n    0.0000000 \n  \n  \n    SwollenLymphNodesYes \n    -0.1653017 \n    0.0919592 \n    -1.7975544 \n    0.0726816 \n  \n  \n    ChestCongestionYes \n    0.0873264 \n    0.0975461 \n    0.8952326 \n    0.3709727 \n  \n  \n    ChillsSweatsYes \n    0.2012657 \n    0.1273016 \n    1.5810148 \n    0.1143296 \n  \n  \n    NasalCongestionYes \n    -0.2157711 \n    0.1137978 \n    -1.8960920 \n    0.0583624 \n  \n  \n    CoughYNYes \n    0.3138934 \n    0.2407384 \n    1.3038777 \n    0.1927070 \n  \n  \n    SneezeYes \n    -0.3619237 \n    0.0982987 \n    -3.6818764 \n    0.0002495 \n  \n  \n    FatigueYes \n    0.2647620 \n    0.1605576 \n    1.6490163 \n    0.0995962 \n  \n  \n    SubjectiveFeverYes \n    0.4368372 \n    0.1033982 \n    4.2248066 \n    0.0000271 \n  \n  \n    HeadacheYes \n    0.0114533 \n    0.1254052 \n    0.0913306 \n    0.9272562 \n  \n  \n    WeaknessMild \n    0.0182293 \n    0.1891690 \n    0.0963651 \n    0.9232584 \n  \n  \n    WeaknessModerate \n    0.0989441 \n    0.1978635 \n    0.5000625 \n    0.6171894 \n  \n  \n    WeaknessSevere \n    0.3734354 \n    0.2307665 \n    1.6182393 \n    0.1060648 \n  \n  \n    WeaknessYNYes \n    NA \n    NA \n    NA \n    NA \n  \n  \n    CoughIntensityMild \n    0.0848811 \n    0.2798780 \n    0.3032791 \n    0.7617680 \n  \n  \n    CoughIntensityModerate \n    -0.0613837 \n    0.3019966 \n    -0.2032595 \n    0.8389917 \n  \n  \n    CoughIntensitySevere \n    -0.0372720 \n    0.3140127 \n    -0.1186957 \n    0.9055507 \n  \n  \n    CoughYN2Yes \n    NA \n    NA \n    NA \n    NA \n  \n  \n    MyalgiaMild \n    0.1642421 \n    0.1604984 \n    1.0233257 \n    0.3065099 \n  \n  \n    MyalgiaModerate \n    -0.0240642 \n    0.1678337 \n    -0.1433810 \n    0.8860309 \n  \n  \n    MyalgiaSevere \n    -0.1292631 \n    0.2078542 \n    -0.6218934 \n    0.5342159 \n  \n  \n    MyalgiaYNYes \n    NA \n    NA \n    NA \n    NA \n  \n  \n    RunnyNoseYes \n    -0.0804851 \n    0.1085262 \n    -0.7416190 \n    0.4585687 \n  \n  \n    AbPainYes \n    0.0315744 \n    0.1402357 \n    0.2251524 \n    0.8219269 \n  \n  \n    ChestPainYes \n    0.1050706 \n    0.1069797 \n    0.9821547 \n    0.3263654 \n  \n  \n    DiarrheaYes \n    -0.1568064 \n    0.1295451 \n    -1.2104390 \n    0.2265220 \n  \n  \n    EyePnYes \n    0.1315436 \n    0.1297573 \n    1.0137665 \n    0.3110470 \n  \n  \n    InsomniaYes \n    -0.0068237 \n    0.0907966 \n    -0.0751542 \n    0.9401137 \n  \n  \n    ItchyEyeYes \n    -0.0080161 \n    0.1101909 \n    -0.0727470 \n    0.9420284 \n  \n  \n    NauseaYes \n    -0.0340655 \n    0.1020492 \n    -0.3338147 \n    0.7386200 \n  \n  \n    EarPnYes \n    0.0937899 \n    0.1138747 \n    0.8236242 \n    0.4104357 \n  \n  \n    HearingYes \n    0.2322025 \n    0.2220428 \n    1.0457557 \n    0.2960374 \n  \n  \n    PharyngitisYes \n    0.3175805 \n    0.1213416 \n    2.6172439 \n    0.0090571 \n  \n  \n    BreathlessYes \n    0.0905257 \n    0.0998375 \n    0.9067309 \n    0.3648634 \n  \n  \n    ToothPnYes \n    -0.0228762 \n    0.1137504 \n    -0.2011084 \n    0.8406726 \n  \n  \n    VisionYes \n    -0.2746251 \n    0.2776810 \n    -0.9889948 \n    0.3230099 \n  \n  \n    VomitYes \n    0.1652722 \n    0.1514323 \n    1.0913937 \n    0.2754779 \n  \n  \n    WheezeYes \n    -0.0466649 \n    0.1070356 \n    -0.4359755 \n    0.6629899 \n  \n\n\n\n\nglance(flu_lm2)\n\n# A tibble: 1 × 12\n  r.squ…¹ adj.r…² sigma stati…³ p.value    df logLik   AIC   BIC devia…⁴ df.re…⁵\n    <dbl>   <dbl> <dbl>   <dbl>   <dbl> <dbl>  <dbl> <dbl> <dbl>   <dbl>   <int>\n1   0.129  0.0860  1.14    3.02 4.20e-8    34 -1116. 2304. 2469.    909.     695\n# … with 1 more variable: nobs <int>, and abbreviated variable names\n#   ¹​r.squared, ²​adj.r.squared, ³​statistic, ⁴​deviance, ⁵​df.residual\n\n\nLet’s compare these models side-by-side.\n\ncompare_performance(flu_lm1, flu_lm2)\n\n# Comparison of Model Performance Indices\n\nName    | Model |  AIC (weights) | AICc (weights) |  BIC (weights) |    R2 | R2 (adj.) |  RMSE | Sigma\n------------------------------------------------------------------------------------------------------\nflu_lm1 |   _lm | 2329.3 (<.001) | 2329.4 (<.001) | 2343.1 (>.999) | 0.012 |     0.011 | 1.188 | 1.190\nflu_lm2 |   _lm | 2303.8 (>.999) | 2307.7 (>.999) | 2469.2 (<.001) | 0.129 |     0.086 | 1.116 | 1.144\n\n\nEven though it is not a great fit to the data (R-squared = 0.13), the global model is better at explaining the data than the first model based on R-sq and RMSE (as well as AIC).\n\n\nNausea\nNow, I want to fit a logistic regression model using our second outcome of interest, nausea, with a single predictor variable, runny nose.\n\nflu_glm1 <- logistic_reg() %>%\n  set_engine(\"glm\") %>%\n  fit(Nausea ~ RunnyNose, data = flu_data)\nkableExtra::kable(tidy(flu_glm1)) %>%\n  kableExtra::kable_classic(full_width = FALSE, font = \"Arial\")\n\n\n\n \n  \n    term \n    estimate \n    std.error \n    statistic \n    p.value \n  \n \n\n  \n    (Intercept) \n    -0.6578078 \n    0.1452003 \n    -4.5303474 \n    0.0000059 \n  \n  \n    RunnyNoseYes \n    0.0501828 \n    0.1718249 \n    0.2920578 \n    0.7702424 \n  \n\n\n\n\nglance(flu_glm1)\n\n# A tibble: 1 × 8\n  null.deviance df.null logLik   AIC   BIC deviance df.residual  nobs\n          <dbl>   <int>  <dbl> <dbl> <dbl>    <dbl>       <int> <int>\n1          945.     729  -472.  949.  958.     945.         728   730\n\n\nSame as before, I want to fit a global model using nausea and all of the other variables in the dataset and compare it to the first model.\n\nflu_glm2 <- logistic_reg() %>%\n  set_engine(\"glm\") %>%\n  fit(Nausea ~ . , data = flu_data)\nkableExtra::kable(tidy(flu_glm2)) %>%\n  kableExtra::kable_classic(full_width = FALSE, font = \"Arial\")\n\n\n\n \n  \n    term \n    estimate \n    std.error \n    statistic \n    p.value \n  \n \n\n  \n    (Intercept) \n    0.2228705 \n    7.8274090 \n    0.0284731 \n    0.9772848 \n  \n  \n    SwollenLymphNodesYes \n    -0.2510826 \n    0.1960289 \n    -1.2808444 \n    0.2002483 \n  \n  \n    ChestCongestionYes \n    0.2755537 \n    0.2126616 \n    1.2957376 \n    0.1950659 \n  \n  \n    ChillsSweatsYes \n    0.2740967 \n    0.2878278 \n    0.9522940 \n    0.3409479 \n  \n  \n    NasalCongestionYes \n    0.4258174 \n    0.2545609 \n    1.6727521 \n    0.0943761 \n  \n  \n    CoughYNYes \n    -0.1404234 \n    0.5187985 \n    -0.2706705 \n    0.7866445 \n  \n  \n    SneezeYes \n    0.1767237 \n    0.2103493 \n    0.8401441 \n    0.4008276 \n  \n  \n    FatigueYes \n    0.2290618 \n    0.3718816 \n    0.6159535 \n    0.5379252 \n  \n  \n    SubjectiveFeverYes \n    0.2777411 \n    0.2253628 \n    1.2324177 \n    0.2177931 \n  \n  \n    HeadacheYes \n    0.3312592 \n    0.2848965 \n    1.1627353 \n    0.2449369 \n  \n  \n    WeaknessMild \n    -0.1216059 \n    0.4468864 \n    -0.2721182 \n    0.7855312 \n  \n  \n    WeaknessModerate \n    0.3108487 \n    0.4544826 \n    0.6839618 \n    0.4939993 \n  \n  \n    WeaknessSevere \n    0.8231869 \n    0.5104242 \n    1.6127505 \n    0.1067987 \n  \n  \n    WeaknessYNYes \n    NA \n    NA \n    NA \n    NA \n  \n  \n    CoughIntensityMild \n    -0.2207938 \n    0.5843673 \n    -0.3778339 \n    0.7055540 \n  \n  \n    CoughIntensityModerate \n    -0.3626784 \n    0.6313701 \n    -0.5744307 \n    0.5656764 \n  \n  \n    CoughIntensitySevere \n    -0.9505442 \n    0.6581423 \n    -1.4442837 \n    0.1486592 \n  \n  \n    CoughYN2Yes \n    NA \n    NA \n    NA \n    NA \n  \n  \n    MyalgiaMild \n    -0.0041462 \n    0.3680943 \n    -0.0112640 \n    0.9910128 \n  \n  \n    MyalgiaModerate \n    0.2047429 \n    0.3732305 \n    0.5485697 \n    0.5833008 \n  \n  \n    MyalgiaSevere \n    0.1207580 \n    0.4449265 \n    0.2714112 \n    0.7860748 \n  \n  \n    MyalgiaYNYes \n    NA \n    NA \n    NA \n    NA \n  \n  \n    RunnyNoseYes \n    0.0453236 \n    0.2326446 \n    0.1948189 \n    0.8455347 \n  \n  \n    AbPainYes \n    0.9393036 \n    0.2814632 \n    3.3372164 \n    0.0008462 \n  \n  \n    ChestPainYes \n    0.0707772 \n    0.2278583 \n    0.3106192 \n    0.7560901 \n  \n  \n    DiarrheaYes \n    1.0639338 \n    0.2587051 \n    4.1125354 \n    0.0000391 \n  \n  \n    EyePnYes \n    -0.3419910 \n    0.2777198 \n    -1.2314249 \n    0.2181640 \n  \n  \n    InsomniaYes \n    0.0841752 \n    0.1929851 \n    0.4361747 \n    0.6627100 \n  \n  \n    ItchyEyeYes \n    -0.0633645 \n    0.2325014 \n    -0.2725337 \n    0.7852117 \n  \n  \n    EarPnYes \n    -0.1817189 \n    0.2392074 \n    -0.7596707 \n    0.4474514 \n  \n  \n    HearingYes \n    0.3230517 \n    0.4524022 \n    0.7140808 \n    0.4751772 \n  \n  \n    PharyngitisYes \n    0.2753644 \n    0.2660588 \n    1.0349756 \n    0.3006803 \n  \n  \n    BreathlessYes \n    0.5268015 \n    0.2085792 \n    2.5256661 \n    0.0115479 \n  \n  \n    ToothPnYes \n    0.4806486 \n    0.2294739 \n    2.0945674 \n    0.0362095 \n  \n  \n    VisionYes \n    0.1254977 \n    0.5411141 \n    0.2319247 \n    0.8165965 \n  \n  \n    VomitYes \n    2.4584655 \n    0.3486077 \n    7.0522411 \n    0.0000000 \n  \n  \n    WheezeYes \n    -0.3044348 \n    0.2340838 \n    -1.3005376 \n    0.1934168 \n  \n  \n    BodyTemp \n    -0.0312460 \n    0.0798381 \n    -0.3913668 \n    0.6955261 \n  \n\n\n\n\nglance(flu_glm2)\n\n# A tibble: 1 × 8\n  null.deviance df.null logLik   AIC   BIC deviance df.residual  nobs\n          <dbl>   <int>  <dbl> <dbl> <dbl>    <dbl>       <int> <int>\n1          945.     729  -376.  821.  982.     751.         695   730\n\n\nLet’s see which model is a better fit.\n\ncompare_performance(flu_glm1, flu_glm2)\n\nWarning in predict.lm(object, newdata, se.fit, scale = 1, type = if (type == :\nprediction from a rank-deficient fit may be misleading\n\nWarning in predict.lm(object, newdata, se.fit, scale = 1, type = if (type == :\nprediction from a rank-deficient fit may be misleading\n\nWarning in predict.lm(object, newdata, se.fit, scale = 1, type = if (type == :\nprediction from a rank-deficient fit may be misleading\n\nWarning in predict.lm(object, newdata, se.fit, scale = 1, type = if (type == :\nprediction from a rank-deficient fit may be misleading\n\n\n# Comparison of Model Performance Indices\n\nName     | Model | AIC (weights) | AICc (weights) | BIC (weights) | Tjur's R2 |  RMSE | Sigma | Log_loss | Score_log | Score_spherical |   PCP\n----------------------------------------------------------------------------------------------------------------------------------------------\nflu_glm1 |  _glm | 948.6 (<.001) |  948.6 (<.001) | 957.8 (>.999) | 1.169e-04 | 0.477 | 1.139 |    0.647 |  -107.871 |           0.012 | 0.545\nflu_glm2 |  _glm | 821.5 (>.999) |  825.1 (>.999) | 982.2 (<.001) |     0.247 | 0.414 | 1.040 |    0.515 |      -Inf |           0.002 | 0.658\n\n\nOnce again, the global model was better at explaining the data than the univariate model."
  }
]